<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cart</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="index.css">
  <script>
    not_applied = false;

    function showAlert(){
      alert("You cannot purchase more than 5 same items");
    }

    const inc_dec_number = (e_id, sign) => {
      //console.log(e_id)
      //console.log(sign)
      if (e_id == 'product_1') {
        let item = document.getElementById('product_1');
        //console.log(item.value)
        if (sign == '+') {
          if (item.value >= 5) {
            item.value = 5;
            showAlert();
          }
          else {
            item.value = parseInt(item.value) + 1;
            let product1_amt = document.getElementById('p_1_ammount').innerHTML
            document.getElementById('p_1_ammount').innerHTML = (parseInt(product1_amt) + 320.00).toFixed(2)

            let p_amt = document.getElementById('p_amt').innerHTML
            document.getElementById('p_amt').innerHTML = (parseInt(p_amt) + 320.00).toFixed(2)
          }
        }
        else {   // sign == '-'
          if (item.value <= 0) {
            item.value = 0
          }
          else {
            item.value = parseInt(item.value) - 1;
            let product1_amt = document.getElementById('p_1_ammount').innerHTML
            document.getElementById('p_1_ammount').innerHTML = (parseInt(product1_amt) - 320.00).toFixed(2)

            let p_amt = document.getElementById('p_amt').innerHTML
            document.getElementById('p_amt').innerHTML = (parseInt(p_amt) - 320.00).toFixed(2)
          }
        }
      }

      if (e_id == 'product_2') {
        let item = document.getElementById('product_2');
        //console.log(item.value)
        if (sign == '+') {
          if (item.value >= 5) {
            item.value = 5;
            showAlert();
          }
          else {
            item.value = parseInt(item.value) + 1;
            let product2_amt = document.getElementById('p_2_ammount').innerHTML
            document.getElementById('p_2_ammount').innerHTML = (parseInt(product2_amt) + 550.00).toFixed(2)

            let p_amt = document.getElementById('p_amt').innerHTML
            document.getElementById('p_amt').innerHTML = (parseInt(p_amt) + 550.00).toFixed(2)
          }
        }
        else {   // sign == '-'
          if (item.value <= 0) {
            item.value = 0
          }
          else {
            item.value = parseInt(item.value) - 1;
            let product2_amt = document.getElementById('p_2_ammount').innerHTML
            document.getElementById('p_2_ammount').innerHTML = (parseInt(product2_amt) - 550.00).toFixed(2)

            let p_amt = document.getElementById('p_amt').innerHTML
            document.getElementById('p_amt').innerHTML = (parseInt(p_amt) - 550.00).toFixed(2)

          }
        }
      }

      let p_amt = document.getElementById('p_amt').innerHTML;
      console.log(p_amt)
      document.getElementById('t_amt').innerHTML = (parseInt(p_amt) + 50.00).toFixed(2)

      if (p_amt == 0) {
        document.getElementById('t_amt').innerHTML = 0.00
      }

    }

    const add_discount = () => {
      console.log(document.getElementById('coupon').value)
      if (document.getElementById('coupon').value == 'NEW2021') {
        if (!not_applied) {
          let t_amt = parseInt(document.getElementById('t_amt').innerHTML)
          document.getElementById('t_amt').innerHTML = t_amt - t_amt * (15 / 100)
          not_applied = true;
        }
        else {
          alert("Couple Code Already Applied")
        }
      }
      else {
        alert("Invalid code")
      }
    }
  </script>

</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-10 col-11 mx-auto">
        <div class="row mt-5 gx-3">
          <!-- Left side div START-->
          <div class="col-md-12 col-lg-8 col-11 mx-auto main_cart mb-lg-0 mb-5">
            <div class="card p-4">
              <h2 class="py-4 font-weight-bold"><i class="fa fa-shopping-cart" aria-hidden="true"></i>&nbsp;Cart
                items(2)</h2>
              <div class="row">
                <!-- item image -->
                <div class="col-md-5 col-11 mx-auto bg-light d-flex justify-content-center align-items-center shadow">
                  <img src="images/laptop.png" class="img-fluid" alt="mobile">
                </div>
                <!-- item details -->
                <div class="col-md-7 col-11 mx-auto px-4 mt-2">
                  <div class="row">
                    <div class="col-lg-6 col-12 card-title">
                      <h1 class="mb-4">Aspire 7</h1>
                      <p class="mb-2">Acer - Windows 10</p>
                      <p class="mb-2">Color - Black</p>
                      <p class="mb-3">SIZE - 15.6'</p>
                    </div>
                    <!-- Quantity indicator -->
                    <div class="col-lg-6 col-12">
                      <ul class="pagination justify-content-end">
                        <li class="page-item">
                          <button class="page-link shadow-none" href="#" onclick="inc_dec_number('product_1','-')"><i
                              class="fa fa-minus" aria-hidden="true"></i></button>
                        </li>
                        <li class="page-item"><input class="page-link number_indicator" id="product_1" value="1"
                            disabled></li>
                        <li class="page-item">
                          <button class="page-link shadow-none" href="#" onclick="inc_dec_number('product_1','+')"><i
                              class="fa fa-plus" aria-hidden="true"></i></button>
                        </li>

                      </ul>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-8 d-flex justify-content-between">
                      <p class="icon"><i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp;Remove</p>
                      <p class="icon"><i class="fa fa-heart" aria-hidden="true"></i>&nbsp;Move to Wish list
                      </p>
                    </div>
                    <div class="col-4 d-flex justify-content-end">
                      <h3>$<span id="p_1_ammount">320.00</span></h3>
                    </div>
                  </div>
                </div>
              </div>
              <hr />

              <div class="row">
                <!-- item image -->
                <div class="col-md-5 col-11 mx-auto bg-light d-flex justify-content-center align-items-center shadow">
                  <img src="images/iphone1.png" class="img-fluid" alt="mobile">
                </div>
                <!-- item details -->
                <div class="col-md-7 col-11 mx-auto px-4 mt-2">
                  <div class="row">
                    <div class="col-lg-6 col-12 card-title">
                      <h1 class="mb-4">Iphone 11</h1>
                      <p class="mb-2">Apple - IOS</p>
                      <p class="mb-2">Color - White</p>
                      <p class="mb-3">SIZE - 5.7''</p>
                    </div>
                    <!-- Quantity indicator -->
                    <div class="col-lg-6 col-12">
                      <ul class="pagination justify-content-end">
                        <li class="page-item">
                          <button class="page-link shadow-none" href="#" onclick="inc_dec_number('product_2','-')"><i
                              class="fa fa-minus" aria-hidden="true"></i></button>
                        </li>
                        <li class="page-item"><input class="page-link number_indicator" id="product_2" value="1"
                            disabled></li>
                        <li class="page-item">
                          <button class="page-link shadow-none" href="#" onclick="inc_dec_number('product_2','+')"><i
                              class="fa fa-plus" aria-hidden="true"></i></button>
                        </li>
                      </ul>
                    </div>
                  </div>
                  <div class="row">
                    <div class="col-8 d-flex justify-content-between">
                      <p class="icon"><i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp;Remove</p>
                      <p class="icon"><i class="fa fa-heart" aria-hidden="true"></i>&nbsp;Move to Wish list
                      </p>
                    </div>
                    <div class="col-4 d-flex justify-content-end">
                      <h3>$<span id="p_2_ammount">550.00</span></h3>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
          <!-- Left side div END-->


          <!-- Right side div START-->
          <div class="col-md-12 col-lg-4 col-11 mx-auto mt-lg-0 mt-md-5">
            <div class="right_side p-3 shadow bg-white">
              <h2 class="product_name mb-5">Total Ammount</h2>
              <div class="price_indivisual d-flex justify-content-between">
                <p>Product Ammount</p>
                <p>$<span id="p_amt">870.00</span></p>
              </div>
              <div class="price_indivisual d-flex justify-content-between">
                <p>Shipping Charge</p>
                <p>$<span id="s_charge">50.00</span></p>
              </div>
              <hr>
              <div class="total-ammount d-flex justify-content-between font-weight-bold">
                <p>Total Ammount</p>
                <p><b class="text-success total_ammount">$<span id="t_amt">920.00</span></b></p>
              </div>
              <span class="d-flex justify-content-center">
                <button class="btn btn-success text-uppercase shadow-none">Checkout</button>
              </span>
            </div>
            <div class="discount_code mt-3 shadow">
              <div class="card">
                <div class="card-body">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="headingOne">
                      <button class="accordion-button" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                        Add a discount
                      </button>
                    </h2>
                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne"
                      data-bs-parent="#accordionExample">
                      <div class="accordion-body ">

                        <div class="input-group ">
                          <input type="text" class="form-control shadow-none discount_text"
                            aria-label="Recipient's username" aria-describedby="button-addon2" id="coupon">
                          <button class="btn btn-success btn-sm-  shadow-none" type="button" id="button-addon2"
                            onclick="add_discount()">Apply</button>
                        </div>

                        <small id="throw_error" class="text-dark">apply coupon code <b class="text-success">NEW2021</b>
                          to get <b>15%</b> discount</small>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="mt-3 mb-3 shadow p-3 bg-white">
              <div class="pt-1">
                <h5 class="mb-4">Expected delivery date</h5>
                <p id="del_date">9th june - 11th june</p>
              </div>
            </div>

          </div>
          <!-- Right side div END -->

        </div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous">
    </script>
  <script>
    const current_date = new Date();
    let date_1 = current_date.toUTCString().substring(0, 11);


    current_date.setDate(current_date.getDate() + 3)
    let date_2 = current_date.toUTCString().substring(0, 11);

    document.getElementById('del_date').innerHTML = `${date_1} - ${date_2}`;
  </script>
</body>

</html>